Цель работы: Создание собственного приватного блокчейна Ethereum с выполнением его инициализации. Изучить способ подключения к этому узлу и выдать простейшие команды в приглашении geth.

1.	Готовим файл genesis.json
Для того чтобы быстро освоить процесс создания смарт-контрактов, нам нужен блокчейн. Вначале создадим приватный блокчейн на своем сервере, так как с ним проще всего работать.
Прежде всего создаём папку «Blockchain», куда мы разместим файл. В ней мы создаем текстовый документ, где будем описывать первичный блок цепочки блоков.
Для того чтобы изменить тип на json, зайдем в панель управления windows и меняем просмотр на «Мелкие значки», нажимаем на «Параметры Проводника», выбираем вкладку «Вид» и в дополнительных параметрах убираем галочку со «Скрывать расширение для зарегистрированных типов файлов». Нажимаем «Применить» и «ОК»
Открывает папку, где мы создавали текстовый документ, жмем по нему правой кнопкой и переименуем в «genesis.json», меняя тип .txt на .json
JSON - текстовый формат обмена данными, основанный на JavaScript. Как и многие другие текстовые форматы, JSON легко читается людьми.
JSON-текст представляет собой одну из двух структур:
•	Набор пар ключ: значение. В различных языках это реализовано
как запись, структура, словарь, хеш-таблица, список с ключом или ассоциативный массив. Ключом может быть только строка, значением - любая форма.
•	Упорядоченный набор значений. Во многих языках это реализовано как массив, вектор, список или последовательность.
Открываем файл genesis.json и в текстовом редакторе пишем код, как на рисунке 4.
 
 
Рис. 4 - genesis.json
Блок config файла genesis.json содержит переменные конфигурации сети Ethereum.
Поле chainId содержит идентификатор блокчейна. Он используется для защиты отрепликации, т.е. от неавторизованных действий пользователей, пытающихся действовать отимени настоящего отправителя данных.При создании нашей приватной сети мы можем указать любое значение.
Значение 0 в поле homesteadBlock указывает на то, что мы будем использовать релизсетиEthereum под названием Homestead.
Реализация изменений может потребовать выполнения так называемой процедуры хардфорка. В результате этой процедуры может меняться структура блока, появляется возможность использовать ранее недоступные блоки и вносить различные изменения в протокол, но так как мы не будем делать хардфорк, то установим значения соответствующих параметров eip155Block, eip150Blockиeip158Block равными нулю.
Параметр difficulty важен для нас в практическом смысле. Этот параметр имеет прямое влияние на время генерации новых блоков блокчейна.
С помощью параметра gasLimit мы задаем в рамках блокчейна предел расхода так называемого газа (Gas). Газ Ethereum представляет собой расходный ресурс, который тратится навыполнение таких операций, как отправка транзакций, публикация и выполнение контрактов и т.п.
Параметр alloc позволяет при инициализации блокчейна создать кошельки и заранее наполнить их тестовым эфиром.

2.	Создание аккаунта
Закрываем текстовый редактор и папку Blockchain.
Нажимаем правой кнопкой на папку Blockchain, нажимаем GitBashHere, после чего откроется консоль Git, в которой и будет проходить создание аккаунта:
$ gethaccount new --datadir«имякаталога»
При создании аккаунта будет запрошен пароль, и подтверждение пароля.
--Datadir -указывает путь к рабочему каталогу.
 
Accountnewвыведет на консоль в фигурных скобках так называемый адрес узла.
3.	Запускаем инициализацию узла
После создания аккаунта нужно выполнить инициализацию узла:
$ geth --identity "yourldentity" --datadir«имякаталога»initgenesis.json
C помощью параметра datadirмы указываем путь к рабочему каталогу, а в параметре Init - путь к файлу первичного блока genesis.json.
--identity - указывает пользовательское имя узла.
Команда выполнит инициализацию и выведет на консоль результаты:

Рис. 5 - Итог инициализации узла
4.	Запуск майнинга
Теперь можно начать майнинг через geth с помощью следующей команды:
$ geth --datadir«имякаталога» --networkid«число id сети» --rpc --rpcport "8545" -- rpcapi="web3,eth,debug,personal,net" --rpccorsdomain "*" --allow-insecure-unlock console 2>console.log(Рис. 6)

Рис. 6 - Запуск узла

Здесь параметр networkid выделяет эту сеть Ethereum среди других
--rpc --rpcport-Локальный порт для связи компилятора и ноды. Этот порт отображается вбраузере при выборе среды Web3 Provider, а --rpcappiуказывает API, доступные по интерфейсу HTTP-RPC.
--rpccorsdomain - активирует CORS. Полезная опция при использовании для размещения смарт-контрактов браузерных редакторов Solidity (Remix) или браузерных кошельков.
 
Параметр --allow-insecure-unlock даёт возможность небезопасной разблокировки учётной записи, когда связанная учётная запись RPC выставляется через http.
Параметр console 2>console.logсоздаёт текстовый документ в котором отображаются все действия с майнингом, но т.к. он не обязателен, указывайте его на своё усмотрение.
Далее открываем вторую консоль и подключаемся к нашему узлу с помощью следующей команды: $gethattach: "//./pipe/geth.ipc". После подключения вы увидите приглашение в консоли (Рис. 7)

Рис. 7 - Подключение к узлу второй консоли

После чего вам понадобится разблокировать аккаунт для выполнений операций с помощью команды:
personal.unlockAccount("кошелек", "ваш пароль");
С помощью консольных команд miner.start(); и miner.stop();можно запускать и останавливать майнинг. (Для того, чтобы выполнять различные действия со смарт- контрактом, обязательно нужно запустить майнинг)
personal.newAccount(); - создание аккаунта.
еth.accounts - узнать адрес всех имеющихся аккаунтов.
eth.getBalance ("кошелек"); - Показывает баланс кошелька.

Криптовалюта в Ethereum
Для того, чтобы владелец аккаунта может проводить транзакции, публиковать и запускать смарт-контракты, на аккаунте должны быть средства. Если вы создаете тестовую сеть с помощью Geth, передавая ей параметр - dev, уже будет создан аккаунт, имеющий на балансе значительное количество криптовалюты.
Далее вы можете создавать новые аккаунты и переводить на них средства с тех аккаунтов тестовой сети, где уже имеются монеты.
Однако в основной сети Ethereum майнинг-дорогое и долгое занятие. Есть другая возможность, а именно: приобретение криптовалютных средств у владельцев других аккаунтов на биржах и обменниках. При этом владелец аккаунта может перевести средства на ваш аккаунт. Вы должны будетесообщить адрес вашего аккаунта, и если вы ошибетесь, то не будет никакой возможности вернуть ваши средства.
Денежные единицы Ethereum
Внутренняя валюта сети Ethereum называется Ether, или эфир. Когда владелец аккаунта выполняет транзакции, валюта, которая имеется на счету аккаунта, тратится.
Помимо Ether, существуют более крупные и более мелкие единицы криптовалюты Ethereum (аналогично тому, как в фиатных деньгах существуют рубли и копейки, доллары и центы).
Самая мелкая единица-это Wei. В одном эфире (т.е. в одном Ether)содержится целых 1 000 000 000 000 000 000 единиц Wei.
Как вы увидите далее, единица Wei удобнее, чем Ether, когда речь идет об оплате транзакций, не отнимающих много ресурсов.
 
Таблица 1. Денежные единицы Ethereum
Итог работы: Мы научились создавать собственный приватный блокчейн Ethereum, с выполнением его инициализации. Научились создавать узел и подключаться к этому узлу, разблокировали аккаунт для выполнения простейших команды в приглашении geth, рассмотрели криптовалюту и денежные единицы в Ethereum.
